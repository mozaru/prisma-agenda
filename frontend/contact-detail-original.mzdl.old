[cabecalho:]
  constante(___TITULO___,'ContactBook 1.0')
  constante(___DESCRICAO___,'ContactBook in Prism Technology')
  constante(___NOME___,'ContactBook')
  
[conteudo:]
  addTitulo('ContactBook - 1.0')

[dados:Contact]
    trigger(getPeople)
    addCampoNome("Name",tbxName)
    addCampoEmail("Email",tbxEmail)
    addCampoTelefone("Phone",tbxPhone)
    addCampoTelefone("Cell Phone",tbxCellPhone)

    addBotaoDefault("Save",save)
    addBotao("Voltar", voltar)

[trigger:voltar]
  voltarPagina()

[trigger:getPeople]
  se existParam('id')
    restApiGet('people/{query.id}', updateScreen)
  fimse

[trigger:updateScreen{data}]
  setTextFromField(tbxName, data.name)
  setTextFromField(tbxEmail, data.email)
  setTextFromField(tbxPhone, data.phone)
  setTextFromField(tbxCellPhone, data.cellPhone)


[trigger:save]
  obj <- json(name:getTextFromField(tbxName),
    email:getTextFromField(tbxEmail),
    phone:getTextFromField(tbxPhone),
    cellPhone:getTextFromField(tbxCellPhone))

  se existParam('id')
    restApiPut('people/{query.id}',obj,voltar)
  senao
    restApiPost('people',obj,voltar)
  fimse
